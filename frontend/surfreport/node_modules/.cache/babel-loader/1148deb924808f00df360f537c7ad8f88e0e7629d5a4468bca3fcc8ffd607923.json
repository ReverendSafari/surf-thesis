{"ast":null,"code":"import axios from 'axios';\nexport default {\n  props: {\n    beach: String // Beach name passed from the parent component\n  },\n  data() {\n    return {\n      waveData: [],\n      // Stores the fetched wave data\n      closestWave: null // Stores the closest wave data to the current time\n    };\n  },\n  computed: {\n    // Compute the wave height range\n    waveHeightRange() {\n      const height = this.closestWave.height;\n      if (height < 1) return 'Flat';\n      if (height < 2) return '1-2 ft';\n      if (height < 3) return '2-3 ft';\n      if (height < 4) return '3-4 ft';\n      if (height < 6) return '4-6 ft';\n      return '6+ ft';\n    }\n  },\n  methods: {\n    // Fetch wave data from the API\n    async fetchWaves() {\n      try {\n        const response = await axios.get(`https://3k7dz8sjwk.execute-api.us-east-2.amazonaws.com/TestStage/waves/${this.beach}`);\n        const waveData = JSON.parse(response.data.waves);\n        const closestTimeIndex = this.findClosestTimeIndex(waveData.hourly.time);\n        this.closestWave = {\n          time: waveData.hourly.time[closestTimeIndex],\n          height: waveData.hourly.wave_height[closestTimeIndex],\n          direction: waveData.hourly.wave_direction[closestTimeIndex],\n          period: waveData.hourly.wave_period[closestTimeIndex]\n        };\n      } catch (error) {\n        console.error('Error fetching wave data:', error);\n      }\n    },\n    // Find the closest time index to the current time (EST)\n    findClosestTimeIndex(times) {\n      const currentTime = new Date(); // Get current time\n      const timeDifferences = times.map(time => {\n        const waveTime = new Date(time);\n        return Math.abs(waveTime - currentTime); // Calculate the difference in milliseconds\n      });\n      return timeDifferences.indexOf(Math.min(...timeDifferences)); // Find the index with the smallest difference\n    }\n  },\n  watch: {\n    // Refetch the wave data whenever the beach changes\n    beach: {\n      immediate: true,\n      handler() {\n        this.fetchWaves();\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","props","beach","String","data","waveData","closestWave","computed","waveHeightRange","height","methods","fetchWaves","response","get","JSON","parse","waves","closestTimeIndex","findClosestTimeIndex","hourly","time","wave_height","direction","wave_direction","period","wave_period","error","console","times","currentTime","Date","timeDifferences","map","waveTime","Math","abs","indexOf","min","watch","immediate","handler"],"sources":["/home/safari/thesis/frontend/surfreport/src/components/CurrentWaveComponent.vue"],"sourcesContent":["<template>\n    <div class=\"p-6 border rounded-lg w-full max-w-md text-center mt-4\">\n      <h3 class=\"text-xl mb-4\">Current Wave Information for {{ beach }}</h3>\n  \n      <!-- Check if wave data is available -->\n      <div v-if=\"closestWave\">\n        <p><strong>Wave Height:</strong> {{ waveHeightRange }} ({{ closestWave.height }} ft)</p>\n        <p><strong>Wave Period:</strong> {{ closestWave.period }} seconds</p>\n        <p><strong>Wave Direction:</strong> <span :style=\"{transform: 'rotate(' + closestWave.direction + 'deg)'}\">â†‘</span></p>\n      </div>\n  \n      <div v-else>\n        <p>No wave data available.</p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import axios from 'axios';\n  \n  export default {\n    props: {\n      beach: String,  // Beach name passed from the parent component\n    },\n    data() {\n      return {\n        waveData: [],  // Stores the fetched wave data\n        closestWave: null,  // Stores the closest wave data to the current time\n      };\n    },\n    computed: {\n      // Compute the wave height range\n      waveHeightRange() {\n        const height = this.closestWave.height;\n        if (height < 1) return 'Flat';\n        if (height < 2) return '1-2 ft';\n        if (height < 3) return '2-3 ft';\n        if (height < 4) return '3-4 ft';\n        if (height < 6) return '4-6 ft';\n        return '6+ ft';\n      },\n    },\n    methods: {\n      // Fetch wave data from the API\n      async fetchWaves() {\n        try {\n          const response = await axios.get(`https://3k7dz8sjwk.execute-api.us-east-2.amazonaws.com/TestStage/waves/${this.beach}`);\n          const waveData = JSON.parse(response.data.waves);\n          const closestTimeIndex = this.findClosestTimeIndex(waveData.hourly.time);\n          this.closestWave = {\n            time: waveData.hourly.time[closestTimeIndex],\n            height: waveData.hourly.wave_height[closestTimeIndex],\n            direction: waveData.hourly.wave_direction[closestTimeIndex],\n            period: waveData.hourly.wave_period[closestTimeIndex],\n          };\n        } catch (error) {\n          console.error('Error fetching wave data:', error);\n        }\n      },\n      // Find the closest time index to the current time (EST)\n      findClosestTimeIndex(times) {\n        const currentTime = new Date();  // Get current time\n        const timeDifferences = times.map(time => {\n          const waveTime = new Date(time);\n          return Math.abs(waveTime - currentTime);  // Calculate the difference in milliseconds\n        });\n        return timeDifferences.indexOf(Math.min(...timeDifferences));  // Find the index with the smallest difference\n      },\n    },\n    watch: {\n      // Refetch the wave data whenever the beach changes\n      beach: {\n        immediate: true,\n        handler() {\n          this.fetchWaves();\n        },\n      },\n    },\n  };\n  </script>\n  \n  <style scoped>\n  /* Basic styling for MVP */\n  </style>\n  "],"mappings":"AAkBE,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,KAAK,EAAE;IACLC,KAAK,EAAEC,MAAM,CAAG;EAClB,CAAC;EACDC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MAAG;MACfC,WAAW,EAAE,IAAI,CAAG;IACtB,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACR;IACAC,eAAeA,CAAA,EAAG;MAChB,MAAMC,MAAK,GAAI,IAAI,CAACH,WAAW,CAACG,MAAM;MACtC,IAAIA,MAAK,GAAI,CAAC,EAAE,OAAO,MAAM;MAC7B,IAAIA,MAAK,GAAI,CAAC,EAAE,OAAO,QAAQ;MAC/B,IAAIA,MAAK,GAAI,CAAC,EAAE,OAAO,QAAQ;MAC/B,IAAIA,MAAK,GAAI,CAAC,EAAE,OAAO,QAAQ;MAC/B,IAAIA,MAAK,GAAI,CAAC,EAAE,OAAO,QAAQ;MAC/B,OAAO,OAAO;IAChB;EACF,CAAC;EACDC,OAAO,EAAE;IACP;IACA,MAAMC,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMZ,KAAK,CAACa,GAAG,CAAC,0EAA0E,IAAI,CAACX,KAAK,EAAE,CAAC;QACxH,MAAMG,QAAO,GAAIS,IAAI,CAACC,KAAK,CAACH,QAAQ,CAACR,IAAI,CAACY,KAAK,CAAC;QAChD,MAAMC,gBAAe,GAAI,IAAI,CAACC,oBAAoB,CAACb,QAAQ,CAACc,MAAM,CAACC,IAAI,CAAC;QACxE,IAAI,CAACd,WAAU,GAAI;UACjBc,IAAI,EAAEf,QAAQ,CAACc,MAAM,CAACC,IAAI,CAACH,gBAAgB,CAAC;UAC5CR,MAAM,EAAEJ,QAAQ,CAACc,MAAM,CAACE,WAAW,CAACJ,gBAAgB,CAAC;UACrDK,SAAS,EAAEjB,QAAQ,CAACc,MAAM,CAACI,cAAc,CAACN,gBAAgB,CAAC;UAC3DO,MAAM,EAAEnB,QAAQ,CAACc,MAAM,CAACM,WAAW,CAACR,gBAAgB;QACtD,CAAC;MACH,EAAE,OAAOS,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IACD;IACAR,oBAAoBA,CAACU,KAAK,EAAE;MAC1B,MAAMC,WAAU,GAAI,IAAIC,IAAI,CAAC,CAAC,EAAG;MACjC,MAAMC,eAAc,GAAIH,KAAK,CAACI,GAAG,CAACZ,IAAG,IAAK;QACxC,MAAMa,QAAO,GAAI,IAAIH,IAAI,CAACV,IAAI,CAAC;QAC/B,OAAOc,IAAI,CAACC,GAAG,CAACF,QAAO,GAAIJ,WAAW,CAAC,EAAG;MAC5C,CAAC,CAAC;MACF,OAAOE,eAAe,CAACK,OAAO,CAACF,IAAI,CAACG,GAAG,CAAC,GAAGN,eAAe,CAAC,CAAC,EAAG;IACjE;EACF,CAAC;EACDO,KAAK,EAAE;IACL;IACApC,KAAK,EAAE;MACLqC,SAAS,EAAE,IAAI;MACfC,OAAOA,CAAA,EAAG;QACR,IAAI,CAAC7B,UAAU,CAAC,CAAC;MACnB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}